(function(k,h){if(typeof exports=="object")module.exports=h();else if(typeof define=="function"&&define.amd)define(h);else k.Spinner=h()})(this,function(){function k(c,a){c=document.createElement(c||"div");var b;for(b in a)c[b]=a[b];return c}function h(c){for(var a=1,b=arguments.length;a<b;a++)c.appendChild(arguments[a]);return c}function z(c,a,b,d){var e=["opacity",a,~~(c*100),b,d].join("-");b=0.01+b/d*100;d=Math.max(1-(1-c)/a*(100-b),c);var f=n.substring(0,n.indexOf("Animation")).toLowerCase();
f=f&&"-"+f+"-"||"";if(!v[e]){q.insertRule("@"+f+"keyframes "+e+"{0%{opacity:"+d+"}"+b+"%{opacity:"+c+"}"+(b+0.01)+"%{opacity:1}"+(b+a)%100+"%{opacity:"+c+"}100%{opacity:"+d+"}}",q.cssRules.length);v[e]=1}return e}function r(c,a){c=c.style;var b,d;a=a.charAt(0).toUpperCase()+a.slice(1);for(d=0;d<w.length;d++){b=w[d]+a;if(c[b]!==undefined)return b}if(c[a]!==undefined)return a}function i(c,a){for(var b in a)c.style[r(c,b)||b]=a[b];return c}function x(c){for(var a=1;a<arguments.length;a++){var b=arguments[a];
for(var d in b)if(c[d]===undefined)c[d]=b[d]}return c}function y(c,a){return typeof c=="string"?c:c[a%c.length]}function l(c){this.opts=x(c||{},l.defaults,A)}function B(){function c(a,b){return k("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}q.addRule(".spin-vml","behavior:url(#default#VML)");l.prototype.lines=function(a,b){function d(){return i(c("group",{coordsize:j+" "+j,coordorigin:-f+" "+-f}),{width:j,height:j})}function e(o,s,t){h(m,h(i(d(),{rotation:360/b.lines*o+"deg",
left:~~s}),h(i(c("roundrect",{arcsize:b.corners}),{width:f,height:b.width,left:b.radius,top:-b.width>>1,filter:t}),c("fill",{color:y(b.color,o),opacity:b.opacity}),c("stroke",{opacity:0}))))}var f=b.length+b.width,j=2*f,g=-(b.width+b.length)*2+"px",m=i(d(),{position:"absolute",top:g,left:g});if(b.shadow)for(g=1;g<=b.lines;g++)e(g,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(g=1;g<=b.lines;g++)e(g);return h(a,m)};l.prototype.opacity=function(a,b,d,e){a=
a.firstChild;e=e.shadow&&e.lines||0;if(a&&b+e<a.childNodes.length)if(a=(a=(a=a.childNodes[b+e])&&a.firstChild)&&a.firstChild)a.opacity=d}}var w=["webkit","Moz","ms","O"],v={},n,q=function(){var c=k("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],c);return c.sheet||c.styleSheet}(),A={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",position:"absolute"};l.defaults=
{};x(l.prototype,{spin:function(c){this.stop();var a=this,b=a.opts,d=a.el=i(k(0,{className:b.className}),{position:b.position,width:0,zIndex:b.zIndex});i(d,{left:b.left,top:b.top});if(c)c.insertBefore(d,c.firstChild||null);d.setAttribute("role","progressbar");a.lines(d,a.opts);if(!n){var e=0,f=(b.lines-1)*(1-b.direction)/2,j,g=b.fps,m=g/b.speed,o=(1-b.opacity)/(m*b.trail/100),s=m/b.lines;(function t(){e++;for(var p=0;p<b.lines;p++){j=Math.max(1-(e+(b.lines-p)*s)%m*o,b.opacity);a.opacity(d,p*b.direction+
f,j,b)}a.timeout=a.el&&setTimeout(t,~~(1E3/g))})()}return a},stop:function(){var c=this.el;if(c){clearTimeout(this.timeout);c.parentNode&&c.parentNode.removeChild(c);this.el=undefined}return this},lines:function(c,a){function b(j,g){return i(k(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:j,boxShadow:g,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*d+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var d=0,e=
(a.lines-1)*(1-a.direction)/2,f;d<a.lines;d++){f=i(k(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:n&&z(a.opacity,a.trail,e+d*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"});a.shadow&&h(f,i(b("#000","0 0 4px #000"),{top:"2px"}));h(c,h(f,b(y(a.color,d),"0 0 1px rgba(0,0,0,.1)")))}return c},opacity:function(c,a,b){if(a<c.childNodes.length)c.childNodes[a].style.opacity=b}});var u=i(k("group"),{behavior:"url(#default#VML)"});
if(!r(u,"transform")&&u.adj)B();else n=r(u,"animation");return l});
