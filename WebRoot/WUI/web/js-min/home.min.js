define("qiao",["require","exports","module","jquery","bootstrap"],function(e,t){var n=e("jquery"),r=e("bootstrap");String.prototype.contains=function(e){return this.indexOf(e)!=-1},String.prototype.startWith=function(e){return this.indexOf(e)==0},String.prototype.endWith=function(e){return this.length==0?!1:this.indexOf(e)==this.length-1},String.prototype.inArray=function(e){if(this&&e)for(var t=0;t<e.length;t++)if(this==e[t])return!0;return!1},n.fn.qser=function(){var e={},t=n(this).serializeArray();if(t.length!=0)for(var r=0;r<t.length;r++)e[t[r].name]=t[r].value;return e},n.fn.qdata=function(){var e={},t=n(this).attr("data");if(t){var r=t.split(";");for(var i=0;i<r.length;i++)if(r[i]){var s=r[i].split(":");e[s[0]]=s[1]}}return e},t.ajaxoptions={url:"",data:{},type:"post",dataType:"json",async:!1},t.ajaxopt=function(e){var r=n.extend({},t.ajaxoptions);return typeof e=="string"?r.url=e:n.extend(r,e),r},t.ajax=function(e){if(!!e){var r=t.ajaxopt(e);r.url=base+r.url;var i;return n.ajax(r).done(function(e){i=e}),i}alert("need options")},t.html=function(e,r){var i=t.ajaxopt(e);i.dataType="html";var s=r?r:"#cruddiv";n(s).empty().append(t.ajax(i))},t.ajaxinit=function(){NProgress.done(),n(document).ajaxStart(function(){NProgress.start()}),n(document).ajaxStop(function(){NProgress.done()})},t.to=function(e){e?window.location.href=e:alert("need url")},t.con=function(e){console.log(e)},t.on=function(e,t,r){n(document).off(t,e).on(t,e,r)},t.bs={},t.bs.ue={},t.bs.modaloptions={url:"",fade:"fade",close:!0,title:"title",btn:!1,okbtn:"确定",qubtn:"取消",msg:"msg",big:!1,show:!1,remote:!1,backdrop:"static",keyboard:!0},t.bs.modalstr=function(e){var t='<div class="modal '+e.fade+'" id="bsmodal" tabindex="-1" role="dialog" aria-labelledby="bsmodaltitle" aria-hidden="true" style="position:fixed;top:20px;">';e.big?t+='<div class="modal-dialog modal-lg"><div class="modal-content">':t+='<div class="modal-dialog"><div class="modal-content">';var n="</div></div></div>",r='<div class="modal-header">';e.close&&(r+='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'),r+='<h3 class="modal-title" id="bsmodaltitle">'+e.title+"</h3></div>";var i='<div class="modal-body"><p><h4>'+e.msg+"</h4></p></div>",s='<div class="modal-footer"><button type="button" class="btn btn-primary bsok">'+e.okbtn+"</button>";return e.btn&&(s+='<button type="button" class="btn btn-default bscancel">'+e.qubtn+"</button>"),s+="</div>",t+r+i+s+n},t.bs.alert=function(e,r){var i=n.extend({},t.bs.modaloptions);typeof e=="string"?i.msg=e:n.extend(i,e),i.title="提示",n("body").append(t.bs.modalstr(i));var s=n("#bsmodal");s.modal(i),t.on("button.bsok","click",function(){r&&r(),s.modal("hide")}),t.on("#bsmodal","hidden.bs.modal",function(){s.remove()}),s.modal("show")},t.bs.confirm=function(e,r,i){var s=n.extend({},t.bs.modaloptions);typeof e=="string"?s.msg=e:n.extend(s,e),s.btn=!0,s.title="确认操作",n("body").append(t.bs.modalstr(s));var o=n("#bsmodal");o.modal(s),t.on("button.bsok","click",function(){r&&r(),o.modal("hide")}),t.on("button.bscancel","click",function(){i&&i(),o.modal("hide")}),t.on("#bsmodal","hidden.bs.modal",function(){o.remove()}),o.modal("show")},t.bs.dialog=function(e,r){var i=n.extend({},t.bs.modaloptions,e);i.big=!0,n("body").append(t.bs.modalstr(i));var s=t.ajax({url:e.url,dataType:"html"});n("#bsmodal div.modal-body").empty().append(s);var o=n("#bsmodal");o.modal(i),t.on("button.bsok","click",function(){var e=!0;r&&(e=r()),e&&o.modal("hide")}),t.on("#bsmodal","hidden.bs.modal",function(){o.remove()}),o.modal("show")},t.bs.msgoptions={msg:"msg",type:"info",time:2e3},t.bs.msgstr=function(e,t){return'<div class="alert alert-'+t+' alert-dismissible" role="alert" style="display:none;position:fixed;top:0;left:0;width:100%;z-index:2001;margin:0;text-align:center;" id="bsalert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'+e+"</div>"},t.bs.msg=function(e){var r=n.extend({},t.bs.msgoptions);typeof e=="string"?r.msg=e:n.extend(r,e),n("body").prepend(t.bs.msgstr(r.msg,r.type)),n("#bsalert").slideDown(),setTimeout(function(){n("#bsalert").slideUp(function(){n("#bsalert").remove()})},r.time)},t.crud={},t.crud.url="",t.crud.init=function(){t.on(".menus","click",function(){var e=n(this).qdata().url;e&&(t.crud.url=e,t.crud.reset())}),t.crud.bindcrud(),t.crud.bindpage()},t.crud.bindcrud=function(){t.on(".allcheck","change",function(){n(".onecheck").prop("checked",n(this).prop("checked"))}),t.on(".addBtn","click",function(){t.crud.savep("添加")}),t.on(".editbtn","click",function(){t.crud.savep("修改",n(this).parents("tr").qdata().id)}),t.on(".queBtn","click",function(){t.crud.savep("查询")}),t.on(".relBtn","click",function(){t.crud.reset()}),t.on(".delBtn","click",function(){t.crud.del()}),t.on(".delbtn","click",function(){t.crud.del(n(this).parents("tr").qdata().id)})},t.crud.listopt={pageNumber:1},t.crud.list=function(e){var r={url:t.crud.url+"index"};e&&n.extend(t.crud.listopt,e),r.data=t.crud.listopt,t.html(r)},t.crud.reset=function(){t.crud.listopt={pageNumber:1},t.crud.list()},t.crud.savep=function(e,r){if(e=="查询")t.bs.dialog({title:e,url:t.crud.url+"savep"},function(){return t.crud.list(n("#bsmodal").find("form").qser()),!0});else{var i=r?t.crud.url+"savep?id="+r:t.crud.url+"savep";t.bs.dialog({title:e,url:i},function(){return t.crud.save()})}},t.crud.save=function(){var e=t.ajax({url:t.crud.url+"save",data:n("#bsmodal").find("form").qser()});return t.bs.msg(e),e&&e.type=="success"?(t.crud.list(),!0):!1},t.crud.del=function(e){var r=[];e?r.push(e):n(".onecheck:checked").each(function(){r.push(n(this).parents("tr").qdata().id)}),r.length?t.bs.confirm("确认要删除所选记录吗（若有子记录也会同时删除）？",function(){var e=t.ajax({url:t.crud.url+"del",data:{ids:r.join(",")}});t.bs.msg(e),t.crud.list()}):t.bs.alert("请选择要删除的记录！")},t.crud.bindpage=function(){t.on(".crudfirst","click",function(){n(this).parent().hasClass("disabled")||t.crud.reset()}),t.on(".crudprev","click",function(){n(this).parent().hasClass("disabled")||t.crud.list({pageNumber:t.crud.listopt.pageNumber-1})}),t.on(".crudnext","click",function(){n(this).parent().hasClass("disabled")||t.crud.list({pageNumber:t.crud.listopt.pageNumber+1})}),t.on(".crudlast","click",function(){n(this).parent().hasClass("disabled")||t.crud.list({pageNumber:n(this).qdata().page})}),t.on(".cruda","click",function(){n(this).parent().hasClass("disabled")||t.crud.list({pageNumber:parseInt(n(this).text())})}),t.on(".crudgo","click",function(){var e=parseInt(n(".crudinput").val()),r=parseInt(n(this).qdata().page);e>=1&&e<=r&&t.crud.list({pageNumber:e})})}}),define("login",["require","exports","module","jquery","bootstrap","qiao"],function(e,t){var n=e("jquery"),r=e("bootstrap"),i=e("qiao");t.init=function(e){i.on(".loginbtn","click",t.login),i.on(".loginform","keydown",function(e){e.keyCode==13&&t.login()})},t.login=function(){var e=n(".loginform"),t=e.find("h5"),r=i.ajax({url:"/login/login",data:e.qser()});r?r.msg=="010101"?(t.text("登录成功，正在跳转。。。"),i.to(base+"/ac")):r.msg=="010102"?(t.text("登录成功，正在跳转。。。"),i.to(base+"/manage")):t.text(r.msg):t.text("ajax fail")}}),require(["jquery","bootstrap","qiao","login"],function(e,t,n,r){e(function(){r.init(),n.ajaxinit()})}),define("web/js-src/home",function(){});